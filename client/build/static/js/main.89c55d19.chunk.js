(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(n,e,t){},42:function(n,e,t){},53:function(n,e,t){"use strict";t.r(e);var r=t(0),i=t.n(r),a=t(28),o=t.n(a),c=(t(41),t(42),t(36)),s=t(23),d=t(16),u=t(35),l={connection:"connection",disconnecting:"disconnecting",CLIENT:{SEND_ROOM_MESSAGE:"SEND_ROOM_MESSAGE",CREATE_ROOM:"CREATE_ROOM",JOIN_ROOM:"JOIN_ROOM",LEAVE_ROOM:"LEAVE_ROOM"},SERVER:{JOINED_ROOM:"JOINED_ROOM",ROOMS:"ROOMS",GUEST:"GUEST",ROOM_MESSAGE:"ROOM_MESSAGE"}},b=t(1),p=Object(u.a)("http://localhost:4000"),x=Object(r.createContext)({socket:p,setUsername:function(){return!1},setMessages:function(){return!1},messages:[],rooms:{}});var O,j,f,h,m,g,v,E,w,R,M,S,k,y,C,I,A,N,T,_,G,D=function(){return Object(r.useContext)(x)},L=function(n){var e=Object(r.useState)(""),t=Object(d.a)(e,2),i=t[0],a=t[1],o=Object(r.useState)([]),u=Object(d.a)(o,2),O=u[0],j=u[1],f=Object(r.useState)({}),h=Object(d.a)(f,2),m=h[0],g=h[1],v=Object(r.useState)(""),E=Object(d.a)(v,2),w=E[0],R=E[1];return Object(r.useEffect)((function(){window.onfocus=function(){document.title="Chat App"}}),[]),Object(r.useEffect)((function(){p.on(l.SERVER.ROOM_MESSAGE,(function(n){var e=n.message,t=n.username,r=n.time,i=n.userId;document.hasFocus()||(document.title="New message..."),j((function(n){return[].concat(Object(s.a)(n),[{message:e,username:t,time:r,userId:i}])}))}))}),[p]),p.on(l.SERVER.JOINED_ROOM,(function(n){R(n),j([])})),p.on(l.SERVER.ROOMS,(function(n){g(n)})),Object(b.jsx)(x.Provider,Object(c.a)({value:{socket:p,username:i,roomId:w,setUsername:a,messages:O,setMessages:j,rooms:m}},n))},J=t(2),U=t(3),z=U.a.div(O||(O=Object(J.a)(["\n    height: 100vh;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background-color: var(--default);\n"]))),V=U.a.p(j||(j=Object(J.a)(["\nmargin-top: 12px;\n    color:var(--red);\n"]))),B=U.a.div(f||(f=Object(J.a)(["\n    width: 324px;\n    /* height: 100px; */\n    position: relative;\n    display: flex;\n    padding: 24px;\n    flex-direction: column;\n    border-radius: 8px;\n    background-color: var(--primary) ;\n"]))),F=U.a.h1(h||(h=Object(J.a)(["\n    color:#fff;\n    margin-bottom: 12px;\n    width: 100%;\n    \n"]))),P=U.a.input(m||(m=Object(J.a)(["\n    border:none;\n    width:  100%;\n    height: 30px;\n    margin-bottom: 12px;\n    border-radius: 8px;\n    padding: 0 12px;\n    outline: none;\n    ","\n    transition: all 0.1s ease-in-out;\n"])),(function(n){return!n.shown&&{display:"none"}})),H=U.a.p(g||(g=Object(J.a)(["\n    ","\n    transition: all 0.1s ease-in-out;\n    font-size: 14px;\n    color:#fff;\n    margin-top: 4px;\n    margin-bottom: 4px;\n"])),(function(n){return!n.shown&&{display:"none"}})),W=U.a.button(v||(v=Object(J.a)(["\n    border:none;\n    width: 100%;\n    height: 30px;\n    border-radius: 8px;\n    cursor: pointer;\n    ","\n    ","\n    transition: all 0.1s ease-in-out;\n    &:hover{\n        background: ",";\n        color:#fff;\n    }\n"])),(function(n){return n.back&&{background:"var(--red)",color:"#fff",width:"30%",marginLeft:"auto",marginRight:"auto",marginTop:"12px"}}),(function(n){return!n.shown&&{display:"none"}}),(function(n){return n.back?"var(--default)":"var(--hover)"})),q=function(){var n=D(),e=n.socket,t=n.setUsername,i=(n.rooms,Object(r.useState)("")),a=Object(d.a)(i,2),o=a[0],c=a[1],s=Object(r.useState)(!1),u=Object(d.a)(s,2),p=u[0],x=u[1],O=Object(r.useRef)(null),j=Object(r.useRef)(null);function f(n){var r;if((null===(r=O.current)||void 0===r?void 0:r.value.length)<1)x(!0);else if(x(!1),""===o)c(n);else if("CREATE"===o){var i=j.current.value;if(!i)return;e.emit(l.CLIENT.CREATE_ROOM,{roomName:i}),t(O.current.value),localStorage.setItem("username",O.current.value),O.current.value="",j.current.value=""}else if("ENTER"===o){var a=j.current.value;e.emit(l.CLIENT.JOIN_ROOM,a),localStorage.setItem("username",O.current.value),t(O.current.value),O.current.value="",j.current.value=""}}return Object(r.useEffect)((function(){O&&(O.current.value=localStorage.getItem("username")||"")}),[]),Object(b.jsxs)(z,{children:[Object(b.jsxs)(B,{children:[Object(b.jsx)(F,{children:"Welcome to Chat!"}),Object(b.jsx)(P,{ref:O,shown:!0,placeholder:"Enter Username"}),Object(b.jsx)(P,{ref:j,shown:""!==o,placeholder:"Enter Room ".concat("CREATE"===o?"NAME":"ID")}),Object(b.jsx)(W,{shown:""===o||"ENTER"===o,onClick:function(){return f("ENTER")},children:"Enter Room"}),Object(b.jsx)(H,{shown:""===o,children:""===o&&"or"}),Object(b.jsx)(W,{shown:""===o||"CREATE"===o,onClick:function(){return f("CREATE")},children:(""===o||"CREATE"===o)&&"Create a Room"}),Object(b.jsx)(W,{shown:""!==o,onClick:function(){return c("")},back:!0,children:""!==o&&"Go Back"})]}),p&&Object(b.jsx)(V,{children:"Please enter the name first!"})]})},K={main:"#E75818",gray:"#f5f5f5",darkGray:"#a1a1a1"},Q=U.a.div(E||(E=Object(J.a)(["\n    position:relative;\n    width:100%;\n    overflow:hidden;\n    ",";\n"])),(function(n){return n.isMe?{textAlign:"right",padding:"0px 16px 4px 16px"}:{textAlign:"left",padding:"0 16px 4px 16px"}})),X=U.a.div(w||(w=Object(J.a)(["\n    display: flex;\n    position:relative;\n    flex-wrap: wrap;\n    ","\n    align-items: center;\n    // overflow-wrap: break-word;\n"])),(function(n){return n.isMe&&{flexDirection:"row-reverse"}})),Y=U.a.p(R||(R=Object(J.a)(["\n    padding:8px;\n    display:block;\n    max-width:50%;\n    word-wrap:break-word;\n    white-space: normal;\n    border-radius: 8px 8px 4px 4px;\n    text-align:left;\n    background: ",";\n    margin: 0;\n    ","\n    @media screen and (max-width:480px){\n        max-width:100%;\n    }\n"])),(function(n){return n.isMe?K.main:"white"}),(function(n){return n.isMe&&{color:"white"}})),Z=U.a.div(M||(M=Object(J.a)(["\n    width: ",";\n    overflow:hidden;\n    transition:all 0.2s ease-in-out;\n    display:flex;\n    align-items: center;\n\n"])),(function(n){return n.shown?"100%":"24px"})),$=U.a.p(S||(S=Object(J.a)(["\n    margin:0;\n    color:",";\n    font-weight: 600;\n    font-size: 12px;\n"])),K.darkGray),nn=U.a.div(k||(k=Object(J.a)(["\n    height: 100vh;\n    overflow: hidden;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n"]))),en=U.a.div(y||(y=Object(J.a)(["\n    position: relative;\n    max-width: 758px;\n    margin:8px;\n    height: ",";\n    overflow: auto;\n    background-color: ",";\n    border-radius: 8px;\n    box-sizing: border-box;\n    @media only screen and (min-width: 712px) {\n        height: calc(100vh - 157px);   \n        max-width:",";  \n}\n"])),(function(n){return n.admin?"calc(100vh - 287px)":"calc(100vh - 127px)"}),K.gray,(function(n){return!n.admin&&"100%"})),tn=U.a.div(C||(C=Object(J.a)(["\n    height: 42px;\n    width: 100%;\n    display: flex;\n    position: sticky;\n    top:0;\n    left: 0;\n    align-items: center;\n    justify-content: space-between;\n    padding:9px 16px;\n    border-bottom: 1px solid #16161629;\n    box-sizing: border-box;\n    background-color: ",";\n"])),K.gray),rn=U.a.textarea(I||(I=Object(J.a)(["\n    flex-grow: 1;\n    border:none;\n    outline:none;\n    padding: 16px 0;\n    resize: none;\n    line-height: 150%;\n    border-bottom: 1px solid rgba(22, 22, 22, 0.08);;\n"]))),an=U.a.div(A||(A=Object(J.a)(["\n    min-width: 288px;\n    max-width: 742px;\n    padding: ",";\n    border-radius: ",";\n    margin:0 8px 0 8px;\n    background-color: #1616160A;\n    @media only screen and (min-width: 712px) {\n    padding: 8px;  \n    border-radius: 8px;\n    max-width:",";  \n\n}\n"])),(function(n){return n.admin?"0 8px 8px 8px":"8px"}),(function(n){return n.admin?"0 0 8px 8px":"8px"}),(function(n){return!n.admin&&"100%"})),on=U.a.div(N||(N=Object(J.a)(["\n    display: block;\n    background: white;\n    padding: 4px 16px 16px 16px;\n    border-radius: 8px;\n"]))),cn=U.a.div(T||(T=Object(J.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n"]))),sn=U.a.p(_||(_=Object(J.a)(["\n    font-size: 9px;\n    margin: 0 8px;\n"]))),dn=U.a.button(G||(G=Object(J.a)(["   \n    background: none;\n    border:none;\n    outline:none;\n    cursor: pointer;\n"]))),un=function(){var n=D(),e=n.socket,t=n.username,i=n.messages,a=n.setMessages,o=n.roomId,c=Object(r.useRef)(null),u=Object(r.useState)(!1),p=Object(d.a)(u,2),x=p[0];p[1];function O(n){return 0===n||i[n-1].username!==i[n].username}function j(n){return n===i.length-1||i[n+1].username!==i[n].username}return console.log(e.id),t?Object(b.jsxs)(nn,{children:[Object(b.jsxs)(en,{children:[Object(b.jsx)(tn,{children:Object(b.jsxs)($,{children:["Chat id: ",o]})}),Object(b.jsx)("div",{children:i.map((function(n,t){return Object(b.jsxs)(Q,{isLast:j(t),isMe:n.userId===e.id,children:[O(t)&&Object(b.jsx)("p",{style:{margin:"8px 0",padding:"0"},children:n.username}),Object(b.jsxs)(X,{isMe:n.userId===e.id,children:[Object(b.jsx)(Y,{isMe:n.userId===e.id,children:n.message}),j(t)&&Object(b.jsx)(sn,{children:n.time})]})]},t)}))})]}),Object(b.jsx)("div",{style:{marginBottom:8},children:Object(b.jsx)(an,{children:Object(b.jsxs)(on,{children:[Object(b.jsx)("div",{style:{display:"flex",marginBottom:16},children:Object(b.jsx)(rn,{placeholder:"Message...",ref:c,rows:1})}),Object(b.jsxs)(cn,{children:[Object(b.jsx)(Z,{shown:x}),Object(b.jsx)(dn,{style:{background:" #E75818",color:"white",borderRadius:4,padding:8},onClick:function(){var n=c.current.value;if(""!==n){e.emit(l.CLIENT.SEND_ROOM_MESSAGE,{roomId:o,message:n,username:t});var r=new Date;a([].concat(Object(s.a)(i),[{username:t,message:n,time:"".concat(r.getHours(),":").concat(r.getMinutes()<10?"0".concat(r.getMinutes()):r.getMinutes()),userId:e.id,file:!1,fileUrl:null}])),c.current.value=""}},children:"Send"})]})]})})})]}):Object(b.jsx)(q,{})};var ln=function(){return Object(b.jsx)(L,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(un,{})})})},bn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,54)).then((function(e){var t=e.getCLS,r=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;t(n),r(n),i(n),a(n),o(n)}))};o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(ln,{})}),document.getElementById("root")),bn()}},[[53,1,2]]]);
//# sourceMappingURL=main.89c55d19.chunk.js.map